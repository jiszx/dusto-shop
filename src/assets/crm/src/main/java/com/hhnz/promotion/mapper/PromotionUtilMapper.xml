<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hhnz.promotion.mapper.PromotionUtilMapper">
	<!-- <resultMap id="BaseResultMap"
		type="com.hhnz.organization.model.CrmSalesOrganization">
		WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 01 
			11:51:43 CST 2016.
		<id column="ID" property="id" jdbcType="VARCHAR" />
		<result column="PID" property="pid" jdbcType="VARCHAR" />
		<result column="LEVELS" property="levels" jdbcType="VARCHAR" />
		<result column="TYPE" property="type" jdbcType="VARCHAR" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="ABBR_NAME" property="abbrName" jdbcType="VARCHAR" />
		<result column="CONTACT_NAME" property="contactName" jdbcType="VARCHAR" />
		<result column="TEL" property="tel" jdbcType="VARCHAR" />
		<result column="STATES" property="states" jdbcType="VARCHAR" />
		<result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
		<result column="CREATE_TS" property="createTs" jdbcType="TIMESTAMP" />
		<result column="UPDATE_TS" property="updateTs" jdbcType="TIMESTAMP" />
		<result column="CANCEL_TS" property="cancelTs" jdbcType="TIMESTAMP" />
		<result column="SAP_ID" property="sapId" jdbcType="VARCHAR" />
		<result column="ATTRIBUTE1" property="attribute1" jdbcType="VARCHAR" />
		<result column="ATTRIBUTE2" property="attribute2" jdbcType="VARCHAR" />
		<result column="ATTRIBUTE3" property="attribute3" jdbcType="VARCHAR" />
		<result column="ATTRIBUTE4" property="attribute4" jdbcType="VARCHAR" />
	</resultMap> -->


	<!-- <select id="findUserOrgInfo" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 01 
			11:51:43 CST 2016.

		SELECT (select name from crm_sales_organization where id = cso.pid) ||
		'-' ||
		cso.name as name,
		cso.ID,
		cso.PID,
		cso.LEVELS,
		cso.TYPE,
		cso.ABBR_NAME,
		cso.CONTACT_NAME,
		cso.TEL,
		cso.STATES,
		cso.DESCRIPTION,
		cso.CREATE_TS,
		cso.UPDATE_TS,
		cso.CANCEL_TS,
		cso.SAP_ID,
		cso.ATTRIBUTE1,
		cso.ATTRIBUTE2,
		cso.ATTRIBUTE3,
		cso.ATTRIBUTE4
		from CRM_SALES_ORGANIZATION cso
		where 1=1
		and cso.levels='2'
		start with cso.id= #{id,jdbcType=VARCHAR}
		connect by prior cso.id=cso.pid
	</select> -->

	<resultMap type="com.hhnz.promotion.model.CrmPromotionStores"
		id="StoresResultMap">
		<id column="ID" property="id" jdbcType="DECIMAL" />
		<result column="ORGANIZATION_ID" property="organizationId"
			jdbcType="VARCHAR" />
		<result column="ADDRESS" property="address" jdbcType="VARCHAR" />
		<result column="CONTACT" property="contact" jdbcType="VARCHAR" />
		<result column="CONTACT_TEL" property="contactTel" jdbcType="VARCHAR" />
		<result column="CREATE_TS" property="createTs" jdbcType="TIMESTAMP" />
		<result column="CREATE_OID" property="createOid" jdbcType="DECIMAL" />
		<result column="UPDATE_TS" property="updateTs" jdbcType="TIMESTAMP" />
		<result column="UPDATE_OID" property="updateOid" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
	</resultMap>
	<select id="findUserStoresInfo" resultMap="StoresResultMap"
		parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 01 
			11:51:43 CST 2016. -->

		SELECT cps.ID,
		cps.ORGANIZATION_ID,
		cps.ADDRESS,
		cps.CONTACT,
		cps.CONTACT_TEL,
		cps.CREATE_TS,
		cps.CREATE_OID,
		cps.UPDATE_TS,
		cps.UPDATE_OID,
		cso.name||'-'||cps.NAME as name
		FROM crm_promotion_stores cps, crm_sales_organization cso
		where cps.organization_id = cso.id
		and cps.organization_id = #{orgid,jdbcType=VARCHAR}
	</select>

	<resultMap type="com.hhnz.promotion.model.CrmPromotionPur"
		id="PurResultMap">
		<id column="ID" property="id" jdbcType="DECIMAL" />
		<result column="ORGANIZATION_ID" property="organizationId"
			jdbcType="VARCHAR" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="CONTACT" property="contact" jdbcType="VARCHAR" />
		<result column="CONTACT_TEL" property="contactTel" jdbcType="VARCHAR" />
		<result column="CREATE_TS" property="createTs" jdbcType="TIMESTAMP" />
		<result column="CREATE_OID" property="createOid" jdbcType="DECIMAL" />
		<result column="UPDATE_TS" property="updateTs" jdbcType="TIMESTAMP" />
		<result column="UPDATE_OID" property="updateOid" jdbcType="DECIMAL" />
	</resultMap>
	<select id="findUserPurInfo" resultMap="PurResultMap"
		parameterType="java.lang.String">
		SELECT cps.ID,
		cps.ORGANIZATION_ID,
		cps.CONTACT,
		cps.CONTACT_TEL,
		cps.CREATE_TS,
		cps.CREATE_OID,
		cps.UPDATE_TS,
		cps.UPDATE_OID,
		cso.name||'-'||cps.NAME as name
		FROM crm_promotion_pur cps, crm_sales_organization cso
		where cps.organization_id = cso.id
		and cps.organization_id =#{orgid,jdbcType=VARCHAR}
	</select>
	
	<!--  -->
	<resultMap type="com.hhnz.promotion.model.CrmPromotionMaterial"
		id="PromotionMaterialResultMap">
		<id column="ID" property="id" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="PRICE" property="price" jdbcType="DECIMAL" />
		<result column="UNIT" property="unit" jdbcType="VARCHAR" />
		<result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
		<result column="CREATE_TS" property="createTs" jdbcType="TIMESTAMP" />
		<result column="CREATE_OID" property="createOid" jdbcType="DECIMAL" />
		<result column="UPDATE_TS" property="updateTs" jdbcType="TIMESTAMP" />
		<result column="UPDATE_OID" property="updateOid" jdbcType="DECIMAL" />
		<result column="ORGANIZATION_ID" property="organizationId"
			jdbcType="VARCHAR" />
	</resultMap>
	<select id="findUserPromotionMaterialInfo" resultMap="PromotionMaterialResultMap"
		parameterType="java.lang.String">
	SELECT cps.ID, cps.PRICE, cps.UNIT, cps.DESCRIPTION, cps.CREATE_TS,
	cps.CREATE_OID, cps.UPDATE_TS, cps.UPDATE_OID,
	cps.ORGANIZATION_ID,
	cso.name||'-'||cps.NAME as name
	FROM crm_promotion_material cps, crm_sales_organization cso
	where cps.organization_id = cso.id
	and cps.organization_id =#{orgid,jdbcType=VARCHAR}
	</select>
	
	<!-- <select id="findpromotionPrice"  resultType="java.lang.Long">
		select price from crm_promotion_material where 1=1 and id=to_number(#{promotionid})
	</select>  -->
</mapper>